[gd_resource type="Shader" format=2]

[resource]
code = "shader_type canvas_item;

uniform vec2 direction = vec2(0.2,-1.0);
uniform float speed = 0.15;
uniform float scale = 2.2;
uniform vec4 color = vec4(0.2,0.4,1.0,1.0);
uniform float light = 1.0;
uniform vec2 offset = vec2(0.2,0.6);
uniform float on1 = 1.0;
uniform float on2 = 1.0;
uniform float on3 = 1.0;

void fragment(){
	vec2 uv1 = (UV + (TIME * speed  * direction))*scale;
	vec2 uv2 = (UV + (TIME * speed*1.2  * direction) + offset)*scale*1.2;
	vec2 uv3 = (UV + (TIME * speed*1.4  * direction) + (offset * 2.0))*scale*1.4;
	vec4 tex = texture(TEXTURE, uv1)*on1 + texture(TEXTURE, uv2)*on2 + texture(TEXTURE, uv3)*on3;
	tex = clamp(tex,vec4(0.0,0.0,0.0,0.0),vec4(1.0,1.0,1.0,1.0));
	vec4 col = color;
	col.rgb *= light;
	col.rgb *= clamp(-0.2*tan(TIME/2.0),0.0,1.0)*on3*5.0 + 1.0; //lightning
	COLOR = tex*col;
}"
